#!/usr/bin/bash
SCRIPT_DIR=$(cd "$(dirname "$0")" && pwd -P)
PARENT_DIR=$( dirname "$SCRIPT_DIR" );
UNIX_PATH=${PARENT_DIR//\\/\/};
source "$UNIX_PATH/scripts/utils.sh";

load_configuration
check_username

read_password
echo

export URL
export USER
export PASSWORD
export -f jira_status

git log --grep="$GREP_PATTERN"  "$@" | parse_issues | \
    xargs -P 4 -n1 -I{} bash -c 'printf "%s : %s\n" "{}" "$(jira_status "{}")"' | sort
